<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ATS Service | iPhone Model Analyzer+</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-1:#0b0b0d;
    --bg-2:#121018;
    --card:#131219;
    --muted:#9aaec0;
    --accent1:#7b2cbf; /* Ø¨Ù†ÙØ³Ø¬ÙŠ */
    --accent2:#3a2fa6; /* Ø¨Ù†ÙØ³Ø¬ÙŠ ØºØ§Ù…Ù‚ */
    --glow: rgba(123,44,191,0.18);
    --success:#8ef7d3;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; font-family:'Cairo',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
    color:#eef6fb; display:flex; align-items:center; justify-content:center; padding:28px;
  }

  .card{
    width:100%; max-width:920px; border-radius:14px; padding:22px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.012));
    border:1px solid rgba(255,255,255,0.03); box-shadow: 0 10px 40px rgba(10,8,18,0.6);
    overflow:hidden;
  }

  header{display:flex; align-items:center; gap:16px; margin-bottom:14px;}
  .logo{
    width:64px; height:64px; border-radius:12px; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(135deg,var(--accent2),var(--accent1));
    box-shadow: 0 8px 30px var(--glow), inset 0 -6px 18px rgba(0,0,0,0.25);
    font-weight:800; color:#fff; font-size:18px;
  }
  .title{flex:1}
  .title h1{margin:0; font-size:20px; letter-spacing:0.2px}
  .title p{margin:4px 0 0 0; color:var(--muted); font-size:13px}

  .main{
    display:grid; grid-template-columns: 1fr 380px; gap:18px;
  }

  /* left (input + explanation) */
  .left{padding:12px}
  .panel{background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006)); border-radius:12px; padding:14px; border:1px solid rgba(255,255,255,0.02)}
  .hint{color:var(--muted); font-size:13px; margin-bottom:10px}
  .input-wrap{display:flex; gap:10px; align-items:center}
  input[type="text"]{
    flex:1; padding:14px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03);
    background: rgba(255,255,255,0.015); color:#eef6fb; font-size:15px; direction:ltr;
  }
  .btn{
    background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#fff; padding:12px 14px;
    border-radius:10px; border:0; font-weight:700; cursor:pointer; box-shadow: 0 6px 26px rgba(59,47,166,0.18);
  }
  .btn.secondary{background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted); padding:10px}

  .small{font-size:13px; color:var(--muted)}

  /* right (result) */
  .right{padding:12px}
  .result-box{min-height:220px; border-radius:12px; padding:16px; display:flex; flex-direction:column; gap:10px;
            background: linear-gradient(180deg, rgba(123,44,191,0.03), rgba(58,47,166,0.02)); border:1px solid rgba(255,255,255,0.02)}
  .badge{display:inline-block; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.02); color:var(--muted); font-weight:700}
  .result-title{font-size:15px; margin:0}
  .result-main{font-size:16px; color:#eaf9f3; font-weight:700; margin-top:6px}
  .meta{color:var(--muted); font-size:13px}
  .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}

  .share-row{display:flex; gap:8px; align-items:center; margin-top:auto}
  .share-btn{flex:1; background:rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.03); color:#fff; padding:10px; border-radius:10px; cursor:pointer}
  .copy{background:transparent; border:1px dashed rgba(255,255,255,0.04); padding:8px 10px; border-radius:8px; color:var(--muted)}

  footer{margin-top:18px; display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap}
  .brand{color:var(--muted); font-size:13px}
  .contact{display:flex; gap:8px; align-items:center}
  .tiktok{background:#111; color:#fff; padding:8px 10px; border-radius:10px; text-decoration:none; font-weight:700}
  .phone{background:rgba(255,255,255,0.02); padding:8px 12px; border-radius:10px; color:var(--muted); font-weight:700}

  /* animations */
  .fade-in{animation: fadeIn .45s ease both}
  @keyframes fadeIn{from{opacity:0; transform:translateY(8px)}to{opacity:1; transform:none}}
  @media(max-width:900px){
    .main{grid-template-columns:1fr; }
    .right{order:-1}
  }
</style>
</head>
<body>
  <div class="card fade-in" role="main" aria-live="polite">
    <header>
      <div class="logo">ATS</div>
      <div class="title">
        <h1>ATS Service | iPhone Model Analyzer+</h1>
        <p>Made in DZ â€¢ ÙˆØ§Ø¬Ù‡Ø© Premium â€¢ ØªØ­Ù„ÙŠÙ„ Ù…ÙØµÙ‘Ù„ Ù„Ù„Ø£ÙƒÙˆØ§Ø¯</p>
      </div>
    </header>

    <div class="main">
      <div class="left">
        <div class="panel">
          <div class="hint">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø±Ø§Ø² (Ù…Ø«Ø§Ù„: <code>MQ9Q3ZD/A</code>) Ø«Ù… Ø§Ø¶ØºØ· <strong>Ø­Ù„Ù‘Ù„</strong></div>
          <div class="input-wrap">
            <input id="modelInput" type="text" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø±Ø§Ø² Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: MLED3LL/A)" aria-label="Model number" />
            <button class="btn" id="analyzeBtn">Ø­Ù„Ù‘Ù„</button>
          </div>

          <div style="display:flex; gap:8px; margin-top:10px;">
            <button class="btn secondary" id="detailsBtn">ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø±</button>
            <button class="btn secondary" id="examplesBtn">Ø£Ù…Ø«Ù„Ø©</button>
          </div>

          <div style="margin-top:12px" class="small">
            Ù‚Ø§Ø¹Ø¯Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„: <strong>models.json</strong> â€” Ø­Ø±Ù‘ÙƒÙ‡Ø§ Ù…Ù† GitHub ÙƒÙ„Ù‘ ÙˆÙ‚Øª.
          </div>
        </div>
      </div>

      <div class="right">
        <div class="result-box" id="resultBox">
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
              <div class="badge" id="badgeState">Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­Ù„ÙŠÙ„</div>
              <div class="result-title">Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>
            </div>
            <div class="meta" id="metaTime">ATS Service â€¢ Premium</div>
          </div>

          <div class="result-main" id="resultMain">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø±Ø§Ø² ÙˆØ§Ø¶ØºØ· "Ø­Ù„Ù‘Ù„".</div>
          <div class="meta" id="resultSub">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø¶ØºÙˆØ·.</div>

          <div class="chips" id="chipsArea"></div>

          <div class="share-row">
            <button class="share-btn" id="shareBtn">Ø´Ø§Ø±ÙÙƒ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>
            <button class="copy" id="copyBtn">Ù†Ø³Ø®</button>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="brand">ATS Service Â© 2025 â€¢ Made in DZ</div>
      <div class="contact">
        <a class="tiktok" target="_blank" href="https://www.tiktok.com/@ats_mobile1">ØªØ§Ø¨Ø¹Ù†ÙŠ Ø¹Ù„Ù‰ TikTok</a>
        <div class="phone">ğŸ“ 0556989642</div>
      </div>
    </footer>
  </div>

<script>
/*
  ATS Premium analyzer:
  - ÙŠØ­Ù…Ù‘Ù„ Ù…Ù„Ù models.json Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø³Ø§Ø±
  - ÙŠØ·Ø§Ø¨Ù‚ Ø£Ø·ÙˆÙ„ Ù…ÙØªØ§Ø­ (longest-prefix) Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„
  - ÙŠÙ‚Ø±Ø£ suffix Ù„Ù„ÙƒÙˆØ¯ (Ù…Ø«Ù„ LL/A, ZA/A, VC/A) Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
*/

let models = null;
let regions = null;

// ØªØ­Ù…ÙŠÙ„ JSON (models.json) Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
fetch('models.json')
  .then(r => r.ok ? r.json() : Promise.reject('models.json not found'))
  .then(data => {
    models = data.models || {};
    regions = data.regions || {};
    document.getElementById('badgeState').innerText = 'Ù‚Ø§Ø¹Ø¯Ø© Ø¬Ø§Ù‡Ø²Ø© âœ…';
  })
  .catch(err => {
    console.warn(err);
    document.getElementById('badgeState').innerText = 'Ù‚Ø§Ø¹Ø¯Ø© ØºÙŠØ± Ù…Ø­Ù…Ù‘Ù„Ø© â€” Ø£Ø¶Ù models.json';
  });

// Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø£Ø·ÙˆÙ„ Ù…ÙØªØ§Ø­ Ù…Ø·Ø§Ø¨Ù‚ Ù…Ù† Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
function findBestModelKey(prefix) {
  if (!models) return null;
  // Ù†Ø¨Ø­Ø« Ø¹Ù† Ø£Ø·ÙˆÙ„ Ù…ÙØªØ§Ø­ ÙŠØ·Ø§Ø¨Ù‚ Ø¨Ø¯Ø§ÙŠØ© prefix
  let best = null;
  for (const key of Object.keys(models)) {
    if (prefix.startsWith(key) && (!best || key.length > best.length)) best = key;
  }
  return best;
}

function analyze(codeRaw) {
  const out = {
    input: codeRaw,
    normalized: codeRaw ? codeRaw.trim().toUpperCase() : '',
    first: '',
    firstMeaning: '',
    modelGuess: null,
    regionCode: '',
    regionMeaning: '',
    retail: ''
  };
  if (!out.normalized) return out;

  let code = out.normalized;
  if (code.startsWith('@')) code = code.slice(1); // handle TikTok handles

  // extract region suffix (try last 4, then 3)
  const last4 = code.slice(-4);
  const last3 = code.slice(-3);
  let regionKey = '';
  if (regions && regions[last4]) regionKey = last4;
  else if (regions && regions[last3]) regionKey = last3;
  else regionKey = last4; // fallback show last4

  out.regionCode = regionKey;
  out.regionMeaning = (regions && regions[regionKey]) ? regions[regionKey] : 'Ù…Ù†Ø·Ù‚Ø© ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©';

  // first char
  const prefixNoSlash = code.replace(/\//g, '');
  out.first = prefixNoSlash.charAt(0) || '';
  switch(out.first){
    case 'M': out.firstMeaning = 'Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ØµÙ†Ø¹ (Brand New)'; break;
    case 'F': out.firstMeaning = 'Ù…Ø¬Ø¯Ù‘Ø¯ Ø±Ø³Ù…ÙŠ (Refurbished by Apple)'; break;
    case 'N': out.firstMeaning = 'Ù…Ø³ØªØ¨Ø¯Ù„ Ù…Ù† Ø¢Ø¨Ù„ (Replacement)'; break;
    case 'P': out.firstMeaning = 'Ø´Ø®ØµÙŠ / Ù…Ø­ÙÙˆØ± (Personalized)'; break;
    case 'A': out.firstMeaning = 'Ù†Ø³Ø®Ø© Ø¹Ø±Ø¶ (Demo Unit)'; break;
    default: out.firstMeaning = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ (Ø­Ø±Ù Ø£ÙˆÙ„ ØºÙŠØ± Ù…Ø£Ù„ÙˆÙ)'; break;
  }

  // model guess: use the prefix (first 6 chars without slash) and find best matching key
  const lookupPrefix = prefixNoSlash.slice(0,6);
  const bestKey = findBestModelKey(lookupPrefix);
  if (bestKey) {
    out.modelGuess = models[bestKey];
  } else {
    // heuristic fallback: look at letters patterns
    if (lookupPrefix.startsWith('MQ')) out.modelGuess = 'iPhone family (MQ-series) â€” Ø¬ÙŠÙ„ Ø­Ø¯ÙŠØ«';
    else if (lookupPrefix.startsWith('ML') || lookupPrefix.startsWith('MLE')) out.modelGuess = 'iPhone family (ML/MLE series) â€” 12/13/14';
    else out.modelGuess = 'ØºÙŠØ± Ù…ØªÙˆÙØ± ØªØ·Ø§Ø¨Ù‚ Ù…Ø¨Ø§Ø´Ø±Ø› Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« models.json';
  }

  // retail hint
  const afterSlash = code.split('/')[1] || '';
  out.retail = (afterSlash === 'A') ? 'Ù†Ø³Ø®Ø© Ù„Ù„Ø¨ÙŠØ¹ Ø¨Ø§Ù„ØªØ¬Ø²Ø¦Ø© (Retail)' : `Ù†ÙˆØ¹ Ù…Ø°ÙƒÙˆØ±: /${afterSlash || '-'} (ØªØ­Ù‚Ù‚)`;

  return out;
}

// UI binding
document.getElementById('analyzeBtn').addEventListener('click', runAnalyze);
document.getElementById('modelInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter') runAnalyze(); });
document.getElementById('copyBtn').addEventListener('click', ()=>{
  const text = document.getElementById('resultMain').innerText + '\n' + document.getElementById('resultSub').innerText;
  navigator.clipboard.writeText(text).then(()=>alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©'));
});
document.getElementById('shareBtn').addEventListener('click', ()=>{
  const txt = `${document.getElementById('resultMain').innerText}\n${document.getElementById('resultSub').innerText}\nâ€” ATS Service`;
  if (navigator.share) {
    navigator.share({title:'ØªØ­Ù„ÙŠÙ„ Ø·Ø±Ø§Ø² Ø¢ÙŠÙÙˆÙ†', text:txt}).catch(()=>alert('Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©'));
  } else {
    navigator.clipboard.writeText(txt).then(()=>alert('ØªÙ… Ù†Ø³Ø® Ù†Øµ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©'));
  }
});

// show examples
document.getElementById('examplesBtn').addEventListener('click', ()=>{
  const sample = ['MLED3LL/A','MQ9Q3ZD/A','MTU93VC/A','MGC43ZA/A','MQCK2LL/A'];
  document.getElementById('modelInput').value = sample[Math.floor(Math.random()*sample.length)];
  runAnalyze();
});
document.getElementById('detailsBtn').addEventListener('click', ()=>{
  alert('ØªÙØ§ØµÙŠÙ„: ÙŠÙØ³ØªØ®Ø¯Ù… models.json Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ (Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† GitHub). ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ« models.json Ù„Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ù… Ø£ÙƒÙˆØ§Ø¯ Ø¬Ø¯ÙŠØ¯Ø©.');
});

function runAnalyze(){
  const val = document.getElementById('modelInput').value;
  const res = analyze(val);
  renderResult(res);
}

function renderResult(r){
  document.getElementById('resultMain').innerText = `${r.modelGuess || '-'} â€” ${r.firstMeaning}`;
  document.getElementById('resultSub').innerText = `${r.regionMeaning} â€¢ ${r.retail}`;
  document.getElementById('chipsArea').innerHTML = `
    <div class="badge"> Ø·Ø±Ø§Ø²: ${escapeHtml(r.modelGuess || '-')}</div>
    <div class="badge"> Ø§Ù„Ø­Ø§Ù„Ø©: ${escapeHtml(r.firstMeaning)}</div>
    <div class="badge"> Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${escapeHtml(r.regionCode)}</div>
  `;
  document.getElementById('metaTime').innerText = 'ØªØ­Ù„ÙŠÙ„ ÙÙˆØ±ÙŠ â€¢ ATS Service';
}

// small esc
function escapeHtml(s){ return (s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
</script>
</body>
</html>
